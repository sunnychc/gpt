<?xml version="1.0" encoding="UTF-8"?>
<svg width="800px" height="500px" viewBox="0 0 800 500" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>循环神经网络架构</title>
    <defs>
        <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="gradientInput">
            <stop stop-color="#38BDF8" offset="0%"></stop>
            <stop stop-color="#0EA5E9" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="gradientHidden">
            <stop stop-color="#8B5CF6" offset="0%"></stop>
            <stop stop-color="#6366F1" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="gradientOutput">
            <stop stop-color="#F472B6" offset="0%"></stop>
            <stop stop-color="#EC4899" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="gradientState">
            <stop stop-color="#34D399" offset="0%"></stop>
            <stop stop-color="#10B981" offset="100%"></stop>
        </linearGradient>
        <filter id="rnnShadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
        </filter>
    </defs>
    <g id="RNNArchitecture" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <!-- 标题 -->
        <text x="350" y="40" font-family="Arial" font-size="24" font-weight="bold" fill="#1E293B" text-anchor="middle">循环神经网络 (RNN)</text>

        <!-- 展开的RNN -->
        <g id="UnrolledRNN" transform="translate(50, 90)">
            <text x="300" y="-20" font-family="Arial" font-size="18" font-weight="bold" fill="#1E293B" text-anchor="middle">RNN展开视图（按时间步展开）</text>

            <!-- 时间步t-1 -->
            <g id="TimeStep1" transform="translate(0, 0)">
                <!-- 时间步标签 -->
                <text x="100" y="215" font-family="Arial" font-size="16" font-weight="bold" fill="#475569" text-anchor="middle">时间步 t-1</text>

                <!-- 输入 -->
                <g id="Input1">
                    <circle cx="100" cy="70" r="30" fill="url(#gradientInput)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="75" font-family="Arial" font-size="16" fill="white" text-anchor="middle">x(t-1)</text>
                </g>

                <!-- 隐藏状态 -->
                <g id="Hidden1">
                    <circle cx="100" cy="160" r="40" fill="url(#gradientHidden)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="165" font-family="Arial" font-size="16" fill="white" text-anchor="middle">h(t-1)</text>
                </g>

                <!-- 输入到隐藏的连接 -->
                <line x1="100" y1="100" x2="100" y2="120" stroke="#94A3B8" stroke-width="2"></line>
                <polygon points="100,118 96,110 104,110" fill="#94A3B8"></polygon>
            </g>

            <!-- 时间步t -->
            <g id="TimeStep2" transform="translate(200, 0)">
                <!-- 时间步标签 -->
                <text x="100" y="215" font-family="Arial" font-size="16" font-weight="bold" fill="#475569" text-anchor="middle">时间步 t</text>

                <!-- 输入 -->
                <g id="Input2">
                    <circle cx="100" cy="70" r="30" fill="url(#gradientInput)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="75" font-family="Arial" font-size="16" fill="white" text-anchor="middle">x(t)</text>
                </g>

                <!-- 隐藏状态 -->
                <g id="Hidden2">
                    <circle cx="100" cy="160" r="40" fill="url(#gradientHidden)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="165" font-family="Arial" font-size="16" fill="white" text-anchor="middle">h(t)</text>
                </g>

                <!-- 输出 -->
                <g id="Output2">
                    <circle cx="100" cy="250" r="30" fill="url(#gradientOutput)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="255" font-family="Arial" font-size="16" fill="white" text-anchor="middle">y(t)</text>
                </g>

                <!-- 输入到隐藏的连接 -->
                <line x1="100" y1="100" x2="100" y2="120" stroke="#94A3B8" stroke-width="2"></line>
                <polygon points="100,118 96,110 104,110" fill="#94A3B8"></polygon>

                <!-- 隐藏到输出的连接 -->
                <line x1="100" y1="200" x2="100" y2="220" stroke="#94A3B8" stroke-width="2"></line>
                <polygon points="100,218 96,210 104,210" fill="#94A3B8"></polygon>
            </g>

            <!-- 时间步t+1 -->
            <g id="TimeStep3" transform="translate(400, 0)">
                <!-- 时间步标签 -->
                <text x="100" y="215" font-family="Arial" font-size="16" font-weight="bold" fill="#475569" text-anchor="middle">时间步 t+1</text>

                <!-- 输入 -->
                <g id="Input3">
                    <circle cx="100" cy="70" r="30" fill="url(#gradientInput)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="75" font-family="Arial" font-size="16" fill="white" text-anchor="middle">x(t+1)</text>
                </g>

                <!-- 隐藏状态 -->
                <g id="Hidden3">
                    <circle cx="100" cy="160" r="40" fill="url(#gradientHidden)" filter="url(#rnnShadow)"></circle>
                    <text x="100" y="165" font-family="Arial" font-size="16" fill="white" text-anchor="middle">h(t+1)</text>
                </g>

                <!-- 输入到隐藏的连接 -->
                <line x1="100" y1="100" x2="100" y2="120" stroke="#94A3B8" stroke-width="2"></line>
                <polygon points="100,118 96,110 104,110" fill="#94A3B8"></polygon>
            </g>

            <!-- 跨时间步的连接 -->
            <!-- t-1 到 t -->
            <path d="M 140,160 C 170,160 170,160 200,160" stroke="#10B981" stroke-width="3" stroke-dasharray="0"></path>
            <polygon points="198,160 190,156 190,164" fill="#10B981"></polygon>

            <!-- t 到 t+1 -->
            <path d="M 340,160 C 370,160 370,160 400,160" stroke="#10B981" stroke-width="3" stroke-dasharray="0"></path>
            <polygon points="398,160 390,156 390,164" fill="#10B981"></polygon>

            <!-- t+1 到下一时间步的提示 -->
            <path d="M 540,160 C 570,160 570,160 590,160" stroke="#10B981" stroke-width="3" stroke-dasharray="5,3"></path>
            <polygon points="588,160 580,156 580,164" fill="#10B981"></polygon>
        </g>

        <!-- RNN特性 -->
        <g id="RNNFeatures" transform="translate(520, 370)" font-family="Arial" fill="#475569">
            <text x="0" y="0" font-size="16" font-weight="bold" fill="#1E293B" text-anchor="start">RNN特点</text>
            <text x="0" y="25" font-size="14" text-anchor="start">• 记忆性：能保留序列历史信息</text>
            <text x="0" y="50" font-size="14" text-anchor="start">• 共享参数：减少模型复杂度</text>
            <text x="0" y="75" font-size="14" text-anchor="start">• 适用于序列数据如文本、语音等</text>
        </g>
    </g>
</svg>
